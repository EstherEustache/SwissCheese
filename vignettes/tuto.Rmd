---
title: "Easy tutorial to understand the SwissPackage"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Easy tutorial to understand the SwissPackage}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

The SwissCheese package allows to deal with the Swiss cheese non response. It uses the random imputations by donors.
This tutorial is to know how using the SwissCheese package. Another vignette is available which describes in details the method used to imput the missing data. We will use some notations presents in the theorical vignette so please read it first.

To illustrate the package in an easy way, we will considerate an easy dataset with Swiss cheese non response.

### Introduction

Consider a dataset ``df`` of $n=10$ units and $J=5$ variables. It contains $n_m=4$ non respondent units. 

```{r}
# create the dataset
df   <- matrix(c(1,2,1,3,2,
                 NA,3,4,5,2,
                 1,3,NA,NA,3,
                 3,2,5,7,8,
                 5,3,4,2,2,
                 6,NA,2,2,1,
                 4,2,4,4,3,
                 2,5,6,3,7,
                 1,4,2,3,1,
                 NA,NA,NA,NA,2), nrow = 10, ncol = 5, byrow = TRUE)
```

We can see that the non response has no particular pattern.

### The $K$ nearest neighbors of the non respondent units

First, we have to find the $K$ nearest respondent units. We then use the function ``ind.knn()``.

```{r}
res  <- SwissCheese::ind.knn(X = df, k = NULL)
KNN  <- res$KNN
Sr   <- res$Sr
```

``KNN`` corresponds to the matrix $\Lambda$: each row contains in ascending order the ``k`` nearest neighbor of a non respondent. ``Sr``contains the index of the respondent units in ``df``.

### The imputation probabilities of nearest respondents

To assign an imputation probability for the nearest respondents in ``KNN`` we use the function ``calibrate.knn()``.

```{r}
res1 <- SwissCheese::calibrate.knn(X = df, d = NULL, KNN = res$KNN, PSI.init = NULL, k = NULL, max.iter = 1000, tolerance = 0.01)
res1 
```
















